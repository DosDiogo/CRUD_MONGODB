<%-include("top.ejs")%>
    <p>Lista de usuarios cadastrados.</p>
    <div class="alert alert-info">Quantidade de usuarios cadastrados: <%= qty %> </div>

    <table class="table table-bordered table-striped table-hover">
      <thead class="thead-dark">
        <tr>
          <td>Usuario</td>
          <td>E-mail</td>
          <td>Acoes</td>
        </tr>
      </thead>
      <tbody>
        <% users.forEach(item => { %>
      <tr>
        <td><a href="/users/edit/<%= item._id%>" title="Editar"><%= item.name %></a></td>
        <td><%= item.email %></td>
        
        <td>
            <a href="/users/edit/<%= item._id%>">
              <img src="/images/edit.png" alt="icone de botao para editar item" title="Editar">
            </a>

            <a href="/users/delete/<%= item._id%>" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja excluir esse usuÃ¡rio?')" >
              <img src="/images/delete.png" alt="icone de botao para excluir item" title="Excluir">
            </a>

        </td>

      </tr>

          <%
        })
      %>

      </tbody>
    </table>   
        
       
    <nav aria-label="Page navigation example">
      <ul class="pagination">        
        <li class="page-item">
          <a class="page-link" href="/users?pages=<%= pagesQty - 1 %>" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
            
        <% for(let i=1; i <= pagesQty; i++) {
            if (page === i) { %>
              <li class="page-item ">
                <a class="page-link active" href="/users?pages=<%= i %>"><%= i%></a>
              </li>
              <%
            } else {
              %>
              <li class="page-item ">
                <a class="page-link" href="/users?pages=<%= i %>"><%= i%></a>
              </li>
             
        <% } } %>        

        <li class="page-item">       
          <a class="page-link"  href="/users?pages=<%= pagesQty + 1 %>" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>

    <section class="container">
      <div class="row">

        <div class="col">
          <a href="/users/new" class="btn btn-primary" >Cadastrar Cliente</a>
        </div>

        <div class="col">
          <a href="/index" class="btn btn-secondary" >Voltar</a>
        </div>

        <div class="col">
          <a href="/logout" class="btn btn-secondary" >Log Out</a>
        </div>
      </div>

    </section>

    <script>

    </script>

  </body>
</html>
